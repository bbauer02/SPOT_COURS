:_chapter:
:_author: Bauer Baptiste
:_duration: 1 heures
:_version_number: 1.0.0
:_version_date: 02/09/2025
[[aws-ssh]]
= Connexion avec SSH √† une instance AWS EC2
include::../../../run_app.adoc[]

Dans ce chapitre, nous allons voir comment se connecter √† une instance AWS EC2 en utilisant SSH. Nous allons couvrir les √©tapes n√©cessaires pour configurer votre environnement, g√©n√©rer une paire de cl√©s SSH, et √©tablir une connexion s√©curis√©e √† votre instance EC2.

== Cr√©ation de la paire de cl√©s SSH

Pour se connecter √† une instance EC2 via SSH, vous devez d'abord cr√©er une paire de cl√©s SSH. Voici comment le faire :

Dans le panneau de contr√¥le AWS, allez dans la section "EC2" puis "Key Pairs" sous "Network & Security".


image::images/01.png[]

Cliquez sur `Create Key Pair`, donnez un nom √† votre paire de cl√©s, et choisissez le format PEM pour une utilisation avec OpenSSH. Cliquez ensuite sur "Create Key Pair" pour t√©l√©charger le fichier .pem.

- **RSA** : ancien standard, tr√®s r√©pandu, fiable, mais lourdes (cl√©s et signatures volumineuses, calculs plus lents).
- **ED25519** : moderne, rapide, signatures compactes, s√©curit√© forte, mais parfois moins compatible avec les environnements anciens.

üëâ Pour SSH : **ED25519 est recommand√© par d√©faut**, sauf si vous devez g√©rer des syst√®mes anciens qui ne le supportent pas.

.Comparatif RSA vs ED25519
[cols="1,2,2", options="header"]
|===
| Crit√®re | RSA | ED25519

| Type d‚Äôalgorithme
| Bas√© sur la *factorisation de grands nombres premiers*
| Bas√© sur les *courbes elliptiques* (Edwards Curve 25519)

| S√©curit√© √©quivalente
| RSA 2048 ‚âà 112 bits
RSA 4096 ‚âà 150 bits
| Cl√© 256 bits ‚âà 128 bits (√©quivalent RSA 3072‚Äì4096)

| Taille de cl√©
| Grande (2048‚Äì4096 bits)
| Petite (256 bits)

| Performance
| Plus lent (g√©n√©ration, signature, v√©rification)
Lourd sur petits appareils
| Tr√®s rapide, constant-time (prot√®ge contre attaques par timing)

| Robustesse future
| Ancien, √©prouv√©, universellement support√©
| Moderne, con√ßu pour √©viter erreurs d‚Äôimpl√©mentation

| Compatibilit√©
| Support√© partout (anciens syst√®mes, logiciels propri√©taires)
| Support√© par OpenSSH >= 6.5 (2014), moins universel sur vieux syst√®mes

| Taille des signatures
| Grandes (plusieurs centaines d‚Äôoctets)
| Petites (64 octets)

| Simplicit√© d‚Äôusage
| Param√®tres nombreux (taille de cl√©, padding) ‚Üí risques de mauvaise config
| Safe by default, peu de param√®tres
|===

image::images/02.png[]

Quand vous cliquez sur "Create Key Pair", le fichier `.pem` est automatiquement t√©l√©charg√©.

[WARNING]
====
Ce fichier contient votre cl√© priv√©e, que vous devez garder en s√©curit√©.
====


Il faut ensuite s'assurer que SSH soit bien install√© sur votre machine locale. Sur la plupart des syst√®mes Unix (Linux, macOS), SSH est pr√©install√©. Pour Windows, vous pouvez utiliser PowerShell ou le nouveau Terminal Windows que je conseille d'installer.

== V√©rifier si SSH est install√©

* Ouvrez un terminal et tapez la commande suivante :
+
[source,bash]
----
ssh -V
----
+
.Sur Windows
image::images/03.png[]
+
.Sur Ubuntu
image::images/04.png[]


== Installer un client OpenSSH sur Windows


* Dans un Powershell en mode administrateur, ex√©cutez la commande suivante pour installer le client OpenSSH :
+
[source,bash]
----
Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
----

== Installer un client OpenSSH sur Linux

* Dans un Terminal en mode `sudo`, ex√©cutez la commande suivante pour installer le client OpenSSH :
+
[source,bash]
----
sudo apt install openssh-client
----


== Configurer les permissions de la cl√© priv√©e

* Le fichier `.pem` devrait √™tre d√©plac√© dans un r√©pertoire s√©curis√© sur votre machine locale, par exemple `~/.ssh/` sur Linux et macOS, ou `C:\Users\VotreNom\.ssh\` sur Windows.



* Avant d'utiliser la cl√© priv√©e, vous devez configurer les permissions du fichier `.pem` pour qu'il soit lisible uniquement par vous. Utilisez la commande suivante :

.Pour Linux et macOS :
[source,bash]
----
$k = "/chemin/vers/.ssh/votre-cle.pem"
takeown /F "$k"
icacls "$k" /reset
icacls "$k" /inheritance:r
icacls "$k" /grant:r "mon_compte_utilisateur_windows:R"
icacls "$k" /remove:g "Everyone" "BUILTIN\Users" "BUILTIN\Administrators" "NT AUTHORITY\Authenticated Users" "NT AUTHORITY\SYSTEM"
Unblock-File "$k"
----
.Pour Linux et macOS :
[source,bash]
----
chmod 400 /chemin/vers/.ssh/votre-cle.pem
----


== Test maintenant la connexion depuis votre machine vers votre instance EC2

* Pour se connecter √† votre instance EC2, vous aurez besoin de l'adresse IP publique ou du nom DNS public de l'instance. Vous pouvez trouver cette information dans le panneau de contr√¥le AWS sous la section "Instances".

* Cliquez ensuite sur "se connecter" :

image::images/05.png[]

* Copier la commande SSH fournie par AWS, qui ressemble √† ceci :

[source,bash]
----
ssh -i "092025-ssh.pem" ubuntu@ec2-52-47-185-227.eu-west-3.compute.amazonaws.com
----

Ouvrez un terminal et placez vous dans le r√©pertoire o√π se trouve votre fichier `.pem`, puis ex√©cutez la commande SSH en rempla√ßant le chemin vers votre fichier `.pem` et l'adresse de votre instance EC2.

* La premi√®re fois que vous vous connectez, vous recevrez un avertissement concernant l'authenticit√© de l'h√¥te. Tapez `yes` pour continuer.

* Si tout est configur√© correctement, vous devriez maintenant √™tre connect√© √† votre instance EC2 via SSH.

image::images/07.png[]